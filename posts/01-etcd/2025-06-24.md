---
abstract: Enable repeatable deployments of etcd with Ansible.
author: Xander Harris
blogpost: true
category: Preparation
date: 2025-06-24
tags: etcd, prep
title: Automate the etcd deployment with Ansible
---

The lack of a cloud service or an appropriate Terraform provider
leaves us with {term}`Ansible` for configuration management.
Configuration management can be done with many other tools, even
simple bash and ssh which shares the advantage of being agent-less
with {term}`Ansible`. But {term}`Ansible` is the simplest
to implement and most familiar to the author, so other configuration
management tools are not used here.

The {term}`Ansible` code we'll use for this purpose is located in the
[ansible-etcd](https://github.com/edwardtheharris/ansible-etcd) GitHub
repository.

## Make it repeatable

In a previous post we did a quick and dirty deployment of {term}`etcd`
to the control plane node. Today, we'll make that a repeatable
and idempotent operation.

To do this, we'll create a new {term}`Ansible` role, then add
two tasks to the role and a playbook to call the role from.

The role's tasks file looks like this.

```{code-block} ansible-etcd/roles/etcd/tasks/main.yml
:language: yaml
```

And the playbook looks like this.

```{code-block} ansible-etcd/site.yml
:language: yaml
```

To use them, you will run the `ansible-playbook` command as shown below.

```{code-block} shell
ansible-playbook site.yml
```
